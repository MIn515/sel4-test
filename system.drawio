<mxfile host="app.diagrams.net" modified="2023-08-31T13:29:05.876Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36 Edg/116.0.1938.62" etag="22l3jAjJuiiL4mQNc8tt" version="21.7.1" type="github">
  <diagram name="第 1 页" id="m9Fxw6LeTa_XZ3al7phB">
    <mxGraphModel dx="2505" dy="1358" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-33" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="682" width="140" height="204" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;" parent="1" source="f0ESqXNt_cEsnT7XpvTg-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1035.9954833984375" y="1112.6999130249023" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-1" value="&lt;font style=&quot;font-size: 28px;&quot;&gt;Security Monitor (SM)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="333" y="970" width="570" height="70" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-3" value="" style="shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="333" y="1100" width="571" height="90" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-6" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="345" y="1110" width="130" height="65" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="f0ESqXNt_cEsnT7XpvTg-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="408.125" y="1230.0000000000002" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-7" value="&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;CORES&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="355" y="1120" width="106.25" height="47" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-8" value="&lt;font style=&quot;font-size: 17px;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot; color=&quot;#cc0000&quot;&gt;如何跨架构&lt;/font&gt;&lt;font color=&quot;#330000&quot; style=&quot;font-size: 17px;&quot;&gt;（分布式应用场景、甚至异构系统的应用场景）&lt;/font&gt;？&lt;br&gt;跨架构：可以参考Penglai的跨架构方法：sPMP&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="169.63" y="1231" width="477" height="53" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-11" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="245" y="1070" as="sourcePoint" />
            <mxPoint x="935" y="1070" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-12" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Machine&lt;br&gt;(M-mode)&amp;nbsp;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="215" y="975" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeWidth=2;" parent="1" source="f0ESqXNt_cEsnT7XpvTg-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="611.25" y="1300.0000000000002" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-13" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;Optional H/W Features&lt;/b&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="488" y="1111" width="247" height="65" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-15" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Root of Trust&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="755" y="1111" width="130" height="65" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-17" value="&lt;span style=&quot;font-size: 17px;&quot;&gt;可选的一些硬件配置：如&lt;font style=&quot;font-size: 17px;&quot; color=&quot;#cc0000&quot;&gt;缓存侧信道保护&lt;/font&gt;、.....&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="433" y="1320" width="365" height="32" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-18" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Trusted&lt;br&gt;Hardware&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="215" y="1112.5" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-19" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="234" y="905" as="sourcePoint" />
            <mxPoint x="947" y="905" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-23" value="" style="whiteSpace=wrap;html=1;aspect=fixed;gradientColor=none;fillColor=#808080;fillStyle=dashed;strokeColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="333" y="680" width="203" height="203" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-27" value="&lt;font style=&quot;font-size: 23px;&quot;&gt;OS&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="345" y="803" width="182" height="75" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-29" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Supervisor&lt;br/&gt;(S-mode)&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="220" y="816" width="104" height="55" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-30" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;User&lt;br/&gt;(U-mode)&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="228" y="699" width="94" height="55" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-31" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="234" y="953" as="sourcePoint" />
            <mxPoint x="947" y="953" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-32" value="&lt;font color=&quot;#6e6e6e&quot; style=&quot;font-size: 18px;&quot;&gt;OpenSBI&amp;nbsp; HS-mode&amp;nbsp; &amp;nbsp;:&amp;nbsp; &amp;nbsp;&lt;/font&gt;&lt;font color=&quot;#cc0000&quot; style=&quot;font-size: 18px;&quot;&gt;对应x86等其他指令集的四个权限级别&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="304" y="913" width="511" height="34" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-34" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;RT1&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="803" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-36" value="&lt;div style=&quot;text-align: left; font-size: 17px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;基于Sel4:&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;ol style=&quot;font-size: 17px;&quot;&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;支持多线程&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;已被形式化验证&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;基于能力的内存访问模型&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div style=&quot;text-align: left; font-size: 17px;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;&lt;font color=&quot;#cc0000&quot; style=&quot;font-size: 17px;&quot;&gt;&lt;b&gt;拓展&lt;/b&gt;&lt;/font&gt;：&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 17px;&quot;&gt;&lt;ol style=&quot;&quot;&gt;&lt;li style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;实现二进制文件兼容性（自定义函数库？）&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;修改能力访问架构，以实现飞地内细粒度线程隔离&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;&quot;&gt;可信 IO 功能&lt;/li&gt;&lt;li style=&quot;&quot;&gt;RT作为微内核，实现不同功能的组件可以进行自定义选择&lt;br&gt;（keystone也有对应的功能，但他需要在编译之前选择好）&lt;br&gt;（&lt;font color=&quot;#ff0000&quot;&gt;有没有必要&lt;/font&gt;或者&lt;font color=&quot;#ff0000&quot;&gt;能不能&lt;/font&gt;做到在运行时也能够动态调整RT组件）&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1045" y="678" width="539" height="304" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-37" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;eapp1&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="707" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-39" value="&lt;ul&gt;&lt;li&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;支持跨架构&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;实现动态可变的TEE内存模型，以方便飞地间通信&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; （如嵌套的，隔离TCB的....四种共享模型）&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="942" y="1130" width="453" height="101" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-41" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font color=&quot;#ff3333&quot;&gt;讨论&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(50, 49, 48);&quot;&gt;&lt;ol style=&quot;&quot;&gt;&lt;li style=&quot;font-size: 18px;&quot;&gt;RT组件要不要可信？----可以把能力管理的部分作为TCB，其他作为不可信部分&lt;/li&gt;&lt;li style=&quot;font-size: 18px;&quot;&gt;如何划分出能力管理系统?&lt;/li&gt;&lt;li style=&quot;font-size: 18px;&quot;&gt;能力管理系统和其他的组件之间如何协调(其他的组件，如网络，内存管理等肯定都需要使用到能力)？&lt;/li&gt;&lt;li style=&quot;font-size: 18px;&quot;&gt;其他组件作恶怎么办（怎么保证安全）？&lt;/li&gt;&lt;li style=&quot;font-size: 18px;&quot;&gt;sel4是基于软件的能力框架还是基于硬件的能力框架？&lt;br&gt;&lt;/li&gt;&lt;li style=&quot;&quot;&gt;如果RT使用能力框架，那整个系统要不要使用能力框架？&lt;br&gt;&amp;nbsp; &amp;nbsp;如果不用的话，飞地与OS之间兼容性（一个基于能力一个基于传统指针）?&lt;br&gt;&amp;nbsp; &amp;nbsp;如果要的话,系统应用场景（局限在基于能力的内存访问框架）？&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1604" y="793" width="862" height="242" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-43" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;entryX=-0.007;entryY=0.084;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="f0ESqXNt_cEsnT7XpvTg-41" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1476" y="859" as="sourcePoint" />
            <mxPoint x="1540" y="861" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Mh5lOlyZqj41Nqv7c8vX-1" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="750" y="682" width="140" height="204" as="geometry" />
        </mxCell>
        <mxCell id="Mh5lOlyZqj41Nqv7c8vX-2" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;RT2&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="803" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Mh5lOlyZqj41Nqv7c8vX-3" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;eapp2&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="707" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="Mh5lOlyZqj41Nqv7c8vX-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1040.0000762939453" y="832.75" as="targetPoint" />
            <mxPoint x="880" y="833" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="f0ESqXNt_cEsnT7XpvTg-28" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="225" y="787" as="sourcePoint" />
            <mxPoint x="950" y="784" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Mh5lOlyZqj41Nqv7c8vX-4" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;访问控制如何实现？&lt;/b&gt;&lt;br&gt;&lt;ul style=&quot;&quot;&gt;&lt;li style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;RISCV：PMP&lt;/font&gt;&lt;/li&gt;&lt;li style=&quot;&quot;&gt;分布式：sPMP、.......&lt;/li&gt;&lt;/ul&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="191" y="1386" width="231" height="113" as="geometry" />
        </mxCell>
        <mxCell id="UO6SJ1NI1YIwC3rc1g_D-2" value="微内核实际上执行的是隔离和通信。所以其系统调用很少，只有3类11个（发生，返回，让渡）：&lt;br&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;这里实际上反映出微内核的微与兼容性之间的问题&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;我们注重的是sel4形式化验证的特点，而不在意其是否是“微”，但一方面“微”带来的TCB尽可能的小&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;一方面“微”带来的性能影响？&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;所以兼容性方面，一个在Linux上运行的二进制文件，在sel4上运行不了，需要重新编写相应的源码&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;1. （类 Linux 的 sel4 系统 ：&amp;nbsp;&lt;a href=&quot;https://gitlab.com/uxrt&quot;&gt;uxrt · GitLab&lt;/a&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;）---- 看一下他是怎么弄的&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1426" y="1044" width="549" height="113" as="geometry" />
        </mxCell>
        <mxCell id="-m9CrUMiFS9FZlJsloHE-2" value="&lt;p style=&quot;margin: 0in; font-family: 宋体; font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;Keystone 的 enclave未集成到操作系统中，因此不会像未修改的进程那样进行调度。每当设置 enclave 时，都需要存储操作系统的状态（并在稍后恢复）并启动 enclave 运行时，这会带来额外的性能开销。此外，为每个飞地提供运行时会增加飞地开发工作量，并导致系统上出现重复代码，因为许多运行时将提供相同的基本功能。&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0in; font-family: 宋体; font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;font-size: 20px; font-family: 宋体; background-color: initial;&quot;&gt;在 Keystone 中，设备驱动程序可能会包含在&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 20px; font-family: 宋体; background-color: initial;&quot;&gt;enclave 运行时中，以连接到外围设备并执行安全 I/O。然而，没有提出 enclave 和外设之间的双向绑定，这将使支持 DMA 的外设能够通过&amp;nbsp;&lt;/span&gt;&lt;font face=&quot;宋体&quot;&gt;enclave 内存与 enclave 安全地通信。因此，Keystone 无法保护 enclave 免受 DMA 攻击 [18]。&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;span style=&quot;font-family:&amp;quot;Times New Roman&amp;quot;&quot;&gt;Keystone &lt;/span&gt;&lt;span style=&quot;font-family:&lt;br/&gt;SimSun&quot;&gt;通过实现基于路的分区来提供共享&lt;/span&gt;&lt;span style=&quot;font-family:&amp;quot;Times New Roman&amp;quot;&quot;&gt; L2 &lt;/span&gt;&lt;span style=&quot;font-family:SimSun&quot;&gt;缓存分区，该分区将完整的缓存路分配给执行&lt;/span&gt;&lt;span style=&quot;font-family:&lt;br/&gt;&amp;quot;Times New Roman&amp;quot;&quot;&gt; enclave &lt;/span&gt;&lt;span style=&quot;font-family:SimSun&quot;&gt;的处理器内核。这可能导致缓存未充分利用，因为飞地未使用的缓存行无法由任何其他软件组件分配。&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font face=&quot;宋体&quot;&gt;&lt;br&gt;&amp;nbsp; &amp;nbsp;&lt;b&gt;&lt;i&gt;[Enclave Computing on RISC-V: A Brighter Future for Security?&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;&lt;span style=&quot;font-size: 20px;&quot;&gt;&lt;b&gt;&lt;i&gt;]&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: 宋体; font-size: 11.5pt; background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="325" y="290" width="1045" height="296" as="geometry" />
        </mxCell>
        <mxCell id="-m9CrUMiFS9FZlJsloHE-3" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;下一代的enclave：&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;接下来，我们讨论基于飞地的安全架构的开放挑战，并展望如何在下一代架构中应对这些挑战。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;可定制的飞地架构。第二节中介绍的 RISC-V 安全架构各自提供了一种特定类型的飞地，该飞地要么由用户级代码、用户级和主管级代码组成，要么仅隔离进程的一部分。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;换句话说，所有架构都对 enclave 采取严格的一刀切的方法，这要求开发人员根据 enclave 的功能和需求调整敏感服务，而不是让 enclave 适应敏感服务的需求，这样既限制又麻烦。在实践中。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;处理敏感数据的服务（例如生物识别身份验证、数字密钥、机器学习即服务 (MLaaS) 等）的多样性迅速增长，对底层安全架构提出了特定于服务的要求。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;其中一项要求是在外设和 enclave 之间建立安全的双向绑定，这在许多使用传感器和 GPU 等外设的 IoT 和 AI 使用场景中是不可避免的。&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;Enclave 和外设之间的双向绑定包括对从 Enclave 到外设（通过 MMIO）的访问以及从支持 DMA 的外设到 Enclave 内存的访问执行访问控制。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;正如第一节中提到的，商业飞地架构在其威胁模型中不考虑旁道攻击。&lt;/font&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Sanctum 和 Keystone 提出了缓存分区方案，但这些方案受到实际限制或提供了缓存资源到飞地的粗粒度分配。&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;因此，另一个公开的挑战是将足够的、实用的和可定制的微架构防御措施[8]、[23]、[26]纳入飞地架构中，以抵御侧通道攻击。&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;我们设想了我们正在积极研究的下一代飞地架构，它提供不同类型的可定制飞地，其中可以根据敏感服务的功能和安全要求来选择飞地的特权级别。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;还应支持单独的飞地与外围设备（MMIO 和 DMA）的绑定，以支持新兴的物联网和人工智能用例。此外，该架构应通过设计提供灵活的机制，以便在运行时为不同的飞地单独且独立地配置所需的旁路保护级别。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;这些可配置的保护机制需要在整个计算平台堆栈中紧密集成。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;我们目前正在追求的一种方法是允许可配置且按需的细粒度缓存资源分区，该分区可以为每个飞地单独灵活定制。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; face=&quot;宋体&quot;&gt;&amp;nbsp; &amp;nbsp;&lt;b style=&quot;border-color: var(--border-color);&quot;&gt;&lt;i style=&quot;border-color: var(--border-color);&quot;&gt;[Enclave Computing on RISC-V: A Brighter Future for Security?&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; face=&quot;宋体&quot;&gt;&lt;b style=&quot;border-color: var(--border-color);&quot;&gt;&lt;i style=&quot;border-color: var(--border-color);&quot;&gt;]&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="172" y="1565" width="1868" height="541" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
